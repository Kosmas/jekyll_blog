---
layout: post
title: 'Error in AWS when trying to include puppet modules (Error: Could not find
  class apache2 for ...)'
date: 2013-01-29 15:01:04.000000000 +01:00
categories:
- AWS
- Puppet
tags:
- aws
- puppet
- puppet.conf
status: publish
type: post
published: true
meta:
  _edit_last: '2'
author:
  login: kosmas
  email: kosmas@mach7x.com
  display_name: kosmas
  first_name: Kosmas
  last_name: Chatzimichalis
---
<p><strong>Problem</strong></p>
<p>You are trying to work with puppet modules in AWS, after installing puppet as a gem, but when you try to put the modules and manifests outside the main manifests/site.pp file you get an error similar to following:</p>
<pre class="shell">Error: Could not find class apache2 for ip-xx-xx-xx-xx.eu-west-1.compute.internal on node ip-xx-xx-xx-xx.eu-west-1.compute.internal</pre>
<p><strong>Solution</strong></p>
<p>Create a file for the puppet configuration in /etc/puppet/puppet.conf and add the paths to your own manifests and modules, like :</p>
<pre class="shell">$aws sudo vi /etc/puppet/puppet.conf</pre>
<p>and add your paths:</p>
<pre class="shell">[main]
manifest = /home/ubuntu/puppet/manifests/site.pp
modulepath = /etc/puppet/modules:/usr/share/puppet/modules:/home/ubuntu/puppet/modules</pre>
