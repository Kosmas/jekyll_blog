---
layout: post
title: Error in staging environment with tr8n and will_filter
date: 2012-07-19 20:04:54.000000000 +02:00
categories:
- ruby on rails
tags:
- Staging
- tr8n
- will_filter
status: publish
type: post
published: true
meta:
  _edit_last: '2'
author:
  login: kosmas
  email: kosmas@mach7x.com
  display_name: kosmas
  first_name: Kosmas
  last_name: Chatzimichalis
---
<p><strong>Problem</strong><br />
You are using the tr8n translation engine, which works fine in your local development environment, and you want to use it in an environment called 'staging', but after deployment you get the following error in your log files;</p>
<pre class="shell">
NoMethodError (undefined method `[]' for nil:NilClass):                                                                                                                                                                                       
  will_filter (3.1.9) lib/will_filter/config.rb:92:in `user_filters_enabled?'                                                                                                                                                                 
  will_filter (3.1.9) lib/will_filter/extensions/action_controller_extension.rb:34:in `init_will_filter'</pre>
<p><strong>Solution</strong></p>
<p>The default configuration file for will_filter includes an environment called 'stage' and not 'staging'.<br />
So you can add the following into the config/will_filter/config.yml file in your application (just afer the stage: line):</p>
<pre class="shell">staging:
  <<: *defaults
</pre>
